(function(c,I,ma){function g(b,d,e){e=I.createElement("div");if(b)e.id=l+b;e.style.cssText=d||"";return c(e)}function p(b,d){return Math.round((/%/.test(b)?(d==="x"?r.width():r.height())/100:1)*parseInt(b,10))}function V(b){return a.photo||/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(b)}function ga(b){a=c.extend({},c.data(s,u));for(b in a)if(c.isFunction(a[b])&&b.substring(0,2)!=="on")a[b]=a[b].call(s);a.rel=a.rel||s.rel||"nofollow";a.href=a.href||c(s).attr("href");a.title=a.title||
s.title;if(typeof a.href==="string")a.href=c.trim(a.href)}function C(b,d){d&&d.call(s);c.event.trigger(b)}function na(){var b,d=l+"Slideshow_",e="click."+l,o,m;if(a.slideshow&&h[1]){o=function(){J.text(a.slideshowStop).unbind(e).bind(W,function(){if(i<h.length-1||a.loop)b=setTimeout(f.next,a.slideshowSpeed)}).bind(X,function(){clearTimeout(b)}).one(e+" "+Q,m);k.removeClass(d+"off").addClass(d+"on");b=setTimeout(f.next,a.slideshowSpeed)};m=function(){clearTimeout(b);J.text(a.slideshowStart).unbind([W,
X,Q,e].join(" ")).one(e,o);k.removeClass(d+"on").addClass(d+"off")};a.slideshowAuto?o():m()}else k.removeClass(d+"off "+d+"on")}function ha(b){if(!R){s=b;ga();h=c(s);i=0;if(a.rel!=="nofollow"){h=c("."+F).filter(function(){return(c.data(this,u).rel||this.rel)===a.rel});i=h.index(s);if(i===-1){h=h.add(s);i=h.length-1}}if(!v){v=K=true;k.show();if(a.returnFocus)try{s.blur();c(s).one(ia,function(){try{this.focus()}catch(e){}})}catch(d){}z.css({opacity:+a.opacity,cursor:a.overlayClose?"pointer":"auto"}).show();
a.w=p(a.initialWidth,"x");a.h=p(a.initialHeight,"y");f.position();L&&r.bind("resize."+S+" scroll."+S,function(){z.css({width:r.width(),height:r.height(),top:r.scrollTop(),left:r.scrollLeft()})}).trigger("resize."+S);C(ja,a.onOpen);Y.add(Z).hide();$.html(a.close).show()}f.load(true)}}var ka={transition:"elastic",speed:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:true,scrolling:true,inline:false,html:false,
iframe:false,fastIframe:true,photo:false,href:false,title:false,rel:false,opacity:0.9,preloading:true,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:false,returnFocus:true,loop:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,overlayClose:true,escKey:true,arrowKey:true,top:false,bottom:false,left:false,right:false,
fixed:false,data:false},u="colorbox",l="cbox",F=l+"Element",ja=l+"_open",X=l+"_load",W=l+"_complete",Q=l+"_cleanup",ia=l+"_closed",T=l+"_purge",G=c.browser.msie&&!c.support.opacity,L=G&&c.browser.version<7,S=l+"_IE6",z,k,D,t,aa,ba,ca,da,h,r,q,M,N,Z,ea,J,O,P,$,Y,a,A,B,w,x,s,i,j,v,K,R,fa,la,f;f=c.fn[u]=c[u]=function(b,d){var e=this;b=b||{};if(!e[0]){if(e.selector)return e;e=c("<a/>");b.open=true}if(d)b.onComplete=d;e.each(function(){c.data(this,u,c.extend({},c.data(this,u)||ka,b));c(this).addClass(F)});
if(c.isFunction(b.open)&&b.open.call(e)||b.open)ha(e[0]);return e};f.init=function(){r=c(ma);k=g().attr({id:u,"class":G?l+(L?"IE6":"IE"):""});z=g("Overlay",L?"position:absolute":"").hide();D=g("Wrapper");t=g("Content").append(q=g("LoadedContent","width:0; height:0; overflow:hidden"),N=g("LoadingOverlay").add(g("LoadingGraphic")),Z=g("Title"),ea=g("Current"),O=g("Next"),P=g("Previous"),J=g("Slideshow").bind(ja,na),$=g("Close"));D.append(g().append(g("TopLeft"),aa=g("TopCenter"),g("TopRight")),g(false,
"clear:left").append(ba=g("MiddleLeft"),t,ca=g("MiddleRight")),g(false,"clear:left").append(g("BottomLeft"),da=g("BottomCenter"),g("BottomRight"))).children().children().css({"float":"left"});M=g(false,"position:absolute; width:9999px; visibility:hidden; display:none");c("body").prepend(z,k.append(D,M));t.children().hover(function(){c(this).addClass("hover")},function(){c(this).removeClass("hover")}).addClass("hover");A=aa.height()+da.height()+t.outerHeight(true)-t.height();B=ba.width()+ca.width()+
t.outerWidth(true)-t.width();w=q.outerHeight(true);x=q.outerWidth(true);k.css({"padding-bottom":A,"padding-right":B}).hide();O.click(function(){f.next()});P.click(function(){f.prev()});$.click(function(){f.close()});Y=O.add(P).add(ea).add(J);t.children().removeClass("hover");z.click(function(){a.overlayClose&&f.close()});c(I).bind("keydown."+l,function(b){var d=b.keyCode;if(v&&a.escKey&&d===27){b.preventDefault();f.close()}if(v&&a.arrowKey&&h[1])if(d===37){b.preventDefault();P.click()}else if(d===
39){b.preventDefault();O.click()}})};f.remove=function(){k.add(z).remove();c("."+F).removeData(u).removeClass(F)};f.position=function(b,d){function e(n){aa[0].style.width=da[0].style.width=t[0].style.width=n.style.width;N[0].style.height=N[1].style.height=t[0].style.height=ba[0].style.height=ca[0].style.height=n.style.height}var o=0,m=0;r.unbind("resize."+l);k.hide();if(a.fixed&&!L)k.css({position:"fixed"});else{o=r.scrollTop();m=r.scrollLeft();k.css({position:"absolute"})}m+=a.right!==false?Math.max(r.width()-
a.w-x-B-p(a.right,"x"),0):a.left!==false?p(a.left,"x"):Math.round(Math.max(r.width()-a.w-x-B,0)/2);o+=a.bottom!==false?Math.max(I.documentElement.clientHeight-a.h-w-A-p(a.bottom,"y"),0):a.top!==false?p(a.top,"y"):Math.round(Math.max(I.documentElement.clientHeight-a.h-w-A,0)/2);k.show();b=k.width()===a.w+x&&k.height()===a.h+w?0:b||0;D[0].style.width=D[0].style.height="9999px";k.dequeue().animate({width:a.w+x,height:a.h+w,top:o,left:m},{duration:b,complete:function(){e(this);K=false;D[0].style.width=
a.w+x+B+"px";D[0].style.height=a.h+w+A+"px";d&&d();setTimeout(function(){r.bind("resize."+l,f.position)},1)},step:function(){e(this)}})};f.resize=function(b){if(v){b=b||{};if(b.width)a.w=p(b.width,"x")-x-B;if(b.innerWidth)a.w=p(b.innerWidth,"x");q.css({width:a.w});if(b.height)a.h=p(b.height,"y")-w-A;if(b.innerHeight)a.h=p(b.innerHeight,"y");if(!b.innerHeight&&!b.height){b=q.wrapInner("<div style='overflow:auto'></div>").children();a.h=b.height();b.replaceWith(b.children())}q.css({height:a.h});f.position(a.transition===
"none"?0:a.speed)}};f.prep=function(b){if(v){var d,e=a.transition==="none"?0:a.speed;q.remove();q=g("LoadedContent").append(b);q.hide().appendTo(M.show()).css({width:function(){a.w=a.w||q.width();a.w=a.mw&&a.mw<a.w?a.mw:a.w;return a.w}(),overflow:a.scrolling?"auto":"hidden"}).css({height:function(){a.h=a.h||q.height();a.h=a.mh&&a.mh<a.h?a.mh:a.h;return a.h}()}).prependTo(t);M.hide();c(j).css({"float":"none"});L&&c("select").not(k.find("select")).filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(Q,
function(){this.style.visibility="inherit"});d=function(){function o(){G&&k[0].style.removeAttribute("filter")}var m,n,H,E;n=h.length;var y,U;if(v){U=function(){clearTimeout(la);N.hide();C(W,a.onComplete)};G&&j&&q.fadeIn(100);Z.html(a.title).add(q).show();if(n>1){typeof a.current==="string"&&ea.html(a.current.replace("{current}",i+1).replace("{total}",n)).show();O[a.loop||i<n-1?"show":"hide"]().html(a.next);P[a.loop||i?"show":"hide"]().html(a.previous);m=i?h[i-1]:h[n-1];H=i<n-1?h[i+1]:h[0];a.slideshow&&
J.show();if(a.preloading){E=c.data(H,u).href||H.href;n=c.data(m,u).href||m.href;E=c.isFunction(E)?E.call(H):E;n=c.isFunction(n)?n.call(m):n;if(V(E))c("<img/>")[0].src=E;if(V(n))c("<img/>")[0].src=n}}else Y.hide();if(a.iframe){y=c("<iframe/>").addClass(l+"Iframe")[0];a.fastIframe?U():c(y).one("load",U);y.name=l+ +new Date;y.src=a.href;if(!a.scrolling)y.scrolling="no";if(G){y.frameBorder=0;y.allowTransparency="true"}c(y).appendTo(q).one(T,function(){y.src="//about:blank"})}else U();a.transition==="fade"?
k.fadeTo(e,1,o):o()}};a.transition==="fade"?k.fadeTo(e,0,function(){f.position(0,d)}):f.position(e,d)}};f.load=function(b){var d,e,o=f.prep;K=true;j=false;s=h[i];b||ga();C(T);C(X,a.onLoad);a.h=a.height?p(a.height,"y")-w-A:a.innerHeight&&p(a.innerHeight,"y");a.w=a.width?p(a.width,"x")-x-B:a.innerWidth&&p(a.innerWidth,"x");a.mw=a.w;a.mh=a.h;if(a.maxWidth){a.mw=p(a.maxWidth,"x")-x-B;a.mw=a.w&&a.w<a.mw?a.w:a.mw}if(a.maxHeight){a.mh=p(a.maxHeight,"y")-w-A;a.mh=a.h&&a.h<a.mh?a.h:a.mh}d=a.href;la=setTimeout(function(){N.show()},
100);if(a.inline){g().hide().insertBefore(c(d)[0]).one(T,function(){c(this).replaceWith(q.children())});o(c(d))}else if(a.iframe)o(" ");else if(a.html)o(a.html);else if(V(d)){c(j=new Image).addClass(l+"Photo").error(function(){a.title=false;o(g("Error").text("This image could not be loaded"))}).load(function(){var m;j.onload=null;if(a.scalePhotos){e=function(){j.height-=j.height*m;j.width-=j.width*m};if(a.mw&&j.width>a.mw){m=(j.width-a.mw)/j.width;e()}if(a.mh&&j.height>a.mh){m=(j.height-a.mh)/j.height;
e()}}if(a.h)j.style.marginTop=Math.max(a.h-j.height,0)/2+"px";if(h[1]&&(i<h.length-1||a.loop)){j.style.cursor="pointer";j.onclick=function(){f.next()}}if(G)j.style.msInterpolationMode="bicubic";setTimeout(function(){o(j)},1)});setTimeout(function(){j.src=d},1)}else d&&M.load(d,a.data,function(m,n,H){o(n==="error"?g("Error").text("Request unsuccessful: "+H.statusText):c(this).contents())})};f.next=function(){if(!K&&h[1]&&(i<h.length-1||a.loop)){i=i<h.length-1?i+1:0;f.load()}};f.prev=function(){if(!K&&
h[1]&&(i||a.loop)){i=i?i-1:h.length-1;f.load()}};f.close=function(){if(v&&!R){R=true;v=false;C(Q,a.onCleanup);r.unbind("."+l+" ."+S);z.fadeTo(200,0);k.stop().fadeTo(300,0,function(){k.add(z).css({opacity:1,cursor:"auto"}).hide();C(T);q.remove();setTimeout(function(){R=false;C(ia,a.onClosed)},1)})}};f.element=function(){return c(s)};f.settings=ka;fa=function(b){if(!(b.button!==0&&typeof b.button!=="undefined"||b.ctrlKey||b.shiftKey||b.altKey)){b.preventDefault();ha(this)}};c.fn.delegate?c(I).delegate("."+
F,"click",fa):c("."+F).live("click",fa);c(f.init)})(jQuery,document,this);
